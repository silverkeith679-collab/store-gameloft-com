var Gameloft=Gameloft||new Object;Gameloft.console=Gameloft.console||new Object;Gameloft.console.log=console.log;Gameloft.console.warn=function(val){console.warn(val)};Gameloft.settings=Gameloft.settings||settings||new Object;Gameloft.functions=Gameloft.functions||new Object;Gameloft.functions.isJson=function(val){var val=typeof val!=="string"?JSON.stringify(val):val;try{val=JSON.parse(val)}catch(e){return false}return typeof val==="object"&&val!==null};Gameloft.cookie=Gameloft.cookie||new Object;Gameloft.cookie.get=function(name){var matches=document.cookie.match(new RegExp("(?:^|; )"+name.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,String.fromCharCode(92)+"$1")+"=([^;]*)"));return matches?decodeURIComponent(matches[1]):undefined};Gameloft.cookie.set=function(name,value,options){options=options||{};var expires=options.expires;if(typeof expires==="number"&&expires){var d=new Date;d.setTime(d.getTime()+expires*1e3);expires=options.expires=d}if(expires&&expires.toUTCString){options.expires=expires.toUTCString()}value=encodeURIComponent(value);var updatedCookie=name+"="+value;for(var propName in options){updatedCookie+="; "+propName;var propValue=options[propName];if(propValue!==true){updatedCookie+="="+propValue}}document.cookie=updatedCookie};Gameloft.cookie.delete=function(name){this.set(name,"",{expires:-1})};Gameloft.cookie.getByType=function(type){if(!Gameloft.settings.cookies||!Gameloft.settings.cookies[type]||!Gameloft.settings.cookies[type].name)return;return this.get(Gameloft.settings.cookies[type].name)};Gameloft.cookie.setByType=function(type,value){if(!Gameloft.settings.cookies||!Gameloft.settings.cookies[type]||!Gameloft.settings.cookies[type].name)return;if(value||Gameloft.settings.cookies[type].value){var options={};if(Gameloft.settings.cookies[type].expires)options.expires=Gameloft.settings.cookies[type].expires;if(Gameloft.settings.cookies[type].path)options.path=Gameloft.settings.cookies[type].path;if(Gameloft.settings.cookies[type].domain)options.domain=Gameloft.settings.cookies[type].domain;if(Gameloft.settings.cookies[type].httponly)options.httponly=Gameloft.settings.cookies[type].httponly;if(Gameloft.settings.cookies[type].secure)options.secure=Gameloft.settings.cookies[type].secure;this.set(Gameloft.settings.cookies[type].name,value||Gameloft.settings.cookies[type].value,options)}else{this.delete(Gameloft.settings.cookies[type].name)}};Gameloft.cookie.disclaimer=Gameloft.cookie.disclaimer||new Object;Gameloft.cookie.disclaimer.init=function(element){this.element=element;if(!this.element)return false;if(Gameloft.cookie.getByType("cookie_disclaimer"))return;this.element.style.display="block";var elements=this.element.getElementsByTagName("a");for(var i=0;i<elements.length;i++){if(elements[i].getAttribute("href")!=="#close")continue;elements[i].addEventListener("click",function(e){e.preventDefault();Gameloft.cookie.setByType("cookie_disclaimer");Gameloft.cookie.disclaimer.element.style.display="none";Gameloft.layout.render()})}if(!Gameloft.cookie.getByType("cookie_disclaimer"))Gameloft.cookie.setByType("cookie_disclaimer")};Gameloft.layout=Gameloft.layout||new Object;Gameloft.layout.fixedTop=Gameloft.layout.fixedTop||new Object;Gameloft.layout.fixedTop.getHeight=function(){var topHeight=0;var elements=this.getElements();for(var i=0;i<elements.length;i++){try{topHeight+=elements[i].getBoundingClientRect().height}catch(ex){topHeight+=elements[i].offsetHeight}}return topHeight};Gameloft.layout.fixedTop.getElements=function(){var result=[];var elements=document.getElementsByClassName("header-fixed")||[];for(var i=0;i<elements.length;i++){if(elements[i].style.display==="none")continue;result.push(elements[i])}return result};Gameloft.layout.fixedBottom=Gameloft.layout.fixedBottom||new Object;Gameloft.layout.fixedBottom.getHeight=function(){var bottomHeight=0;var elements=this.getElements();for(var i=0;i<elements.length;i++){try{bottomHeight+=elements[i].getBoundingClientRect().height}catch(ex){bottomHeight+=elements[i].offsetHeight}}return bottomHeight};Gameloft.layout.fixedBottom.getElements=function(){return document.getElementsByTagName("footer")||[]};Gameloft.layout.render=function(){this.headerFixedMarginTop=0;var elements=this.fixedTop.getElements();for(var i=0;i<elements.length;i++){elements[i].style.marginTop=this.headerFixedMarginTop+"px";try{this.headerFixedMarginTop+=elements[i].getBoundingClientRect().height}catch(ex){this.headerFixedMarginTop+=elements[i].offsetHeight}}var elements=document.getElementsByClassName("popup-page");for(var i=0;i<elements.length;i++){var topH=Gameloft.layout.fixedTop.getHeight();var bottomH=Gameloft.layout.fixedBottom.getHeight();var totalHeight=window.innerHeight;if(Math.max)totalHeight=Math.max(document.documentElement.clientHeight,totalHeight);elements[i].style.marginTop=topH+"px";elements[i].style.marginBottom=bottomH+"px";elements[i].style.height=totalHeight-topH-bottomH+"px";elements[i].style.paddingBottom="1%"}document.body.style.padding=this.fixedTop.getHeight()+"px 0 0 0"};Gameloft.lazyLoading=Gameloft.lazyLoading||new Object;Gameloft.lazyLoading.images=Gameloft.lazyLoading.images||new Object;Gameloft.lazyLoading.images.isLoading=false;Gameloft.lazyLoading.images.load=function(){if(this.isLoading)return;this.isLoading=true;var imgs=document.querySelectorAll("img[data-gl-lazy-src]");for(var i=0;i<imgs.length;i++){if(imgs[i].getBoundingClientRect().top>window.innerHeight||imgs[i].getBoundingClientRect().left>window.innerWidth||imgs[i].getBoundingClientRect().bottom<0||getComputedStyle(imgs[i]).display==="none"||typeof imgs[i].style.opacity!=="undefined"&&imgs[i].style.opacity===0||!$(imgs[i]).is(":visible"))continue;if(typeof imgs[i].dataset.glLazySrc!=="undefined"){$(imgs[i]).stop().animate({opacity:0},100,function(){$(this).attr("src",this.dataset.glLazySrc).animate({opacity:1},200);delete this.dataset.glLazySrc})}if(typeof imgs[i].dataset.glLazySrcset!=="undefined"){imgs[i].srcset=imgs[i].dataset.glLazySrcset;$(imgs[i]).removeAttr("data-gl-lazy-srcset")}if(document.querySelectorAll("img[data-gl-lazy-src]").length<=0){this.unset()}}this.isLoading=false};Gameloft.lazyLoading.images.loadMfp=function(){if(!$.magnificPopup||!$.magnificPopup.instance||!$.magnificPopup.instance.content)return;var items=$.magnificPopup.instance.content;for(var i=0;i<items.length;i++){document.getElementById(items[i].id).addEventListener("scroll",Gameloft.lazyLoading.images.load)}};Gameloft.lazyLoading.images.set=function(){var hiddenImages=document.querySelectorAll("img[data-gl-lazy-src].hide, img[data-gl-lazy-srcset].hide");for(var i=0;i<hiddenImages.length;i++)hiddenImages[i].classList.remove("hide");window.addEventListener("scroll",Gameloft.lazyLoading.images.load);window.addEventListener("resize",Gameloft.lazyLoading.images.load);window.addEventListener("orientationchange",Gameloft.lazyLoading.images.load);var links=document.getElementsByClassName("slider");for(var i=0;i<links.length;i++){links[i].addEventListener("scroll",Gameloft.lazyLoading.images.load)}var links=document.querySelectorAll('a[href^="#"]');for(var i=0;i<links.length;i++){if(!$(links[i].getAttribute("href")).length)continue;$(links[i]).on("mfpOpen",Gameloft.lazyLoading.images.load);$(links[i]).on("mfpOpen",Gameloft.lazyLoading.images.loadMfp)}};Gameloft.lazyLoading.images.unset=function(){window.removeEventListener("scroll",Gameloft.lazyLoading.images.load);window.removeEventListener("resize",Gameloft.lazyLoading.images.load);window.removeEventListener("orientationchange",Gameloft.lazyLoading.images.load);var links=document.getElementsByClassName("slider");for(var i=0;i<links.length;i++){links[i].removeEventListener("scroll",Gameloft.lazyLoading.images.load)}var links=document.querySelectorAll('a[href^="#"]');for(var i=0;i<links.length;i++){$(links[i]).off("mfpOpen",Gameloft.lazyLoading.images.load);$(links[i]).off("mfpOpen",Gameloft.lazyLoading.images.loadMfp)}};Gameloft.lazyLoading.collections=Gameloft.lazyLoading.collections||new Object;Gameloft.lazyLoading.collections.getDocumentHeight=function(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)};Gameloft.lazyLoading.collections.hasUserScrolledToTheBottom=function(){return Gameloft.lazyLoading.collections.getDocumentHeight()-($(window).scrollTop()+$(window).height())<100};Gameloft.lazyLoading.collections.load=function(){if(Gameloft.lazyLoading.collections.hasUserScrolledToTheBottom()&&!Gameloft.lazyLoading.collections.isLazyLoadingLocked){Gameloft.lazyLoading.collections.isLazyLoadingLocked=true;$.ajax({url:window.location.href,method:"POST",data:{get_items:"true"}}).done(function(data){if(!data){return}Gameloft.lazyLoading.collections.elements=document.createElement("div");Gameloft.lazyLoading.collections.elements.innerHTML=data;Gameloft.lazyLoading.collections.elements=Gameloft.lazyLoading.collections.elements.getElementsByTagName("ul");if(!Gameloft.lazyLoading.collections.elements.length){console.warn("ul element has not been found");return}if(Gameloft.lazyLoading.collections.elements.length>1){console.warn("need to have only one ul element");Gameloft.lazyLoading.collections.isLazyLoadingLocked=false;return}Gameloft.lazyLoading.collections.getContainer().append(Gameloft.lazyLoading.collections.elements[0].innerHTML);Gameloft.lazyLoading.collections.isLazyLoadingLocked=false})}};Gameloft.lazyLoading.collections.getContainer=function(){return $("#lazyLoadingCollection")};Gameloft.lazyLoading.collections.init=function(){if(Gameloft.lazyLoading.collections.getContainer().length===0)return;Gameloft.lazyLoading.collections.isLazyLoadingLocked=false;$(window).scroll(function(){Gameloft.lazyLoading.collections.load()})};Gameloft.gtm=Gameloft.gtm||new Object;Gameloft.gtm.initialPush=function(){Gameloft.gtm.deferredDataLayer.init();$("#top-main-slider").on("swipe",function(event,slick,direction,currentSlide){try{var productId=$('[data-slick-index="'+slick.currentSlide+'"][data-gl-product-id]').attr("data-gl-product-id");if(!productId)return;dataLayer=dataLayer||[];dataLayer.push({event:"eePromoView",promotions:[{name:"Top Slider",position:parseInt(slick.currentSlide)+1,id:productId}]})}catch(e){}});var glScrollDebounce=true;$(".products-list").on("scroll",function(){try{if(!glScrollDebounce)return;glScrollDebounce=false;if(typeof this.id==="undefined"||!this.id)return;dataLayer=dataLayer||[];dataLayer.push({event:"swipeList",list:this.id.replace("_"," ").toUpperCase()});setTimeout(function(){glScrollDebounce=true},500)}catch(e){}});$('[data-gl-event="subscribe"]').on("click",function(){try{dataLayer.push({event:"clickSubscription",stepName:"Complete"})}catch(e){}});$('[data-gl-event="initiate-subscription"]').on("click",function(){try{dataLayer.push({event:"clickSubscription",stepName:"Initiate"})}catch(e){}});$('[data-gl-event="initiate-unsubscription"]').on("click",function(){try{dataLayer.push({event:"clickUnsubscription",stepName:"Initiate"})}catch(e){}});Gameloft.gtm.events.cLangItem();Gameloft.gtm.events.cLangIcon();Gameloft.gtm.events.cLogoBanner();Gameloft.gtm.events.cSearchItem();Gameloft.gtm.events.cSearchIcon();Gameloft.gtm.events.cA2HS();Gameloft.gtm.events.cA2Bookmarks();Gameloft.gtm.events.cHomeCategory();Gameloft.gtm.events.swipeScreenshot()};Gameloft.gtm.events=Gameloft.gtm.events||new Object;Gameloft.gtm.deferredDataLayer=Gameloft.gtm.deferredDataLayer||new Object;Gameloft.gtm.deferredDataLayer.data=Gameloft.gtm.deferredDataLayer.data||new Object;Gameloft.gtm.deferredDataLayer.data.cookieName="gl_gtm_deferredDataLayer";Gameloft.gtm.deferredDataLayer.data.get=function(){return JSON.parse(Gameloft.cookie.get(this.cookieName)||"[]")};Gameloft.gtm.deferredDataLayer.data.push=function(data){var val=this.get();if(typeof val.push!=="undefined")val.push(data);Gameloft.cookie.set(this.cookieName,JSON.stringify(val))};Gameloft.gtm.deferredDataLayer.data.clean=function(){Gameloft.cookie.delete(this.cookieName)};Gameloft.gtm.deferredDataLayer.push=function(el,data){if(el.getAttribute("href")){this.data.push({target:el.getAttribute("href"),data:data})}else if(el.getAttribute("action")){this.data.push({target:el.getAttribute("action"),data:data})}else if(el.form&&el.form.getAttribute("action")){this.data.push({target:el.form.getAttribute("action"),data:data})}};Gameloft.gtm.deferredDataLayer.clean=function(){this.data.clean()};Gameloft.gtm.deferredDataLayer.init=function(){var data=this.data.get();for(var i=0;i<data.length;i++){if(window.location.href.indexOf(data[i].target)>=0){dataLayer.push(data[i].data)}else{Gameloft.console.warn("Target "+data[i].target+" isn't reached","window.location.href - "+window.location.href)}}this.data.clean()};Gameloft.gtm.events.cLangItem=function(){$("#language-switcher-popup > ul > a").on("click",function(){var currLang=$("html").attr("lang")||$("html").attr("data-gl-lang")||$("#language-switcher-popup").attr("data-gl-current-lang-iso")||"";var selLang=$(this).attr("data-gl-language-iso")||$(this).find("[data-gl-language-iso]").attr("data-gl-language-iso")||"";if(currLang!==""&&selLang!==""){try{Gameloft.gtm.deferredDataLayer.push(this,{event:"languageSelection",stepName:currLang,chosenLanguage:selLang})}catch(e){}}else{Gameloft.console.warn("Current or selected language is empty")}})};Gameloft.gtm.events.cLangIcon=function(){$("#header-languages a").on("click",function(){var currLang=$("html").attr("lang")||$("html").attr("data-gl-lang")||$("#language-switcher-popup").attr("data-gl-current-lang-iso")||"";if(currLang!==""){try{dataLayer.push({event:"languageFeature",stepName:"clickFlag",siteLanguage:currLang})}catch(e){}}else{Gameloft.console.warn("Current language is empty")}})};Gameloft.gtm.events.cLogoBanner=function(){$("header .logo a, header .title a").on("click",function(){try{Gameloft.gtm.deferredDataLayer.push(this,{event:"clickBanner",page:document.title})}catch(e){}})};Gameloft.gtm.events.cSearchItem=function(){$("#search-gamelist a").on("click",function(){var productName=$(this).find(".name").html()||$(this).find("img").attr("alt")||"";productName=typeof productName==="string"?productName.trim():"";if(productName!==""){try{Gameloft.gtm.deferredDataLayer.push(this,{event:"search",stepName:"clickResult",productName:productName})}catch(e){}}else{Gameloft.console.warn("Product name is empty")}})};Gameloft.gtm.events.cSearchIcon=function(){$("#header-search a").on("click",function(){try{dataLayer.push({event:"search",stepName:"clickIcon"})}catch(e){}})};Gameloft.gtm.events.cA2HS=function(){$('a[href="#add-to-homescreen"]').on("click",function(){try{dataLayer.push({event:"bookmark"})}catch(e){}})};Gameloft.gtm.events.cA2Bookmarks=function(){$('a[href="#add-to-bookmarks"]').on("click",function(){try{dataLayer.push({event:"bookmark"})}catch(e){}})};Gameloft.gtm.events.cHomeCategory=function(){$(".category-listing ul > a, #select-category-popup ul > a").on("click",function(){var categoryName=$(this).find('[data-gl-ent="category"] [data-gl-ent-data="name"]').html()||"";categoryName=typeof categoryName==="string"?categoryName.trim():"";if(categoryName!==""){try{Gameloft.gtm.deferredDataLayer.push(this,{event:"clickCategory",productCategory:categoryName.replace("&amp;","&")})}catch(e){}}else{Gameloft.console.warn("Category name is empty")}})};Gameloft.gtm.events.swipeScreenshot=function(){$("#screenshot-popup > *").on("swipe",function(event,slick,direction,currentSlide){var productName=$(this).find(".slick-current img").attr("alt")||"";if(productName!==""){try{dataLayer.push({event:"swipeScreenshot",productName:productName})}catch(e){}}else{Gameloft.console.warn("Product name is empty")}});$(".screenshot-previews-list").on("scroll",function(){try{Gameloft.gtm.tmp=Gameloft.gtm.tmp||{};if(Gameloft.gtm.tmp.screenshotPreviewsListScroll)return;Gameloft.gtm.tmp.screenshotPreviewsListScroll=true;var productName=$(this).data("glProductName")||"";if(productName!==""){try{dataLayer.push({event:"swipeScreenshot",productName:productName})}catch(e){}}else{Gameloft.console.warn("Product name is empty")}setTimeout(function(){Gameloft.gtm.tmp.screenshotPreviewsListScroll=false},500)}catch(e){}})};Gameloft.homeScreen=Gameloft.homeScreen||new Object;Gameloft.homeScreen.isAvailable=function(){return typeof this.deferredBeforeInstallPrompt!=="undefined"};Gameloft.homeScreen.addTo=function(){if(!this.deferredBeforeInstallPrompt)return false;this.deferredBeforeInstallPrompt.prompt();this.deferredBeforeInstallPrompt.userChoice.then(function(choiceResult){Gameloft.homeScreen.deferredBeforeInstallPrompt=null});return true};Gameloft.bookmarks=Gameloft.bookmarks||new Object;Gameloft.bookmarks.isAvailable=function(){return window.sidebar&&window.sidebar.addPanel||window.external&&"AddFavorite"in window.external};Gameloft.bookmarks.addTo=function(){if(!this.isAvailable)return;var bookmarkURL=window.location.protocol+"//"+window.location.host+window.location.pathname+"?adid=434826";var bookmarkTitle=document.title;if(window.sidebar&&window.sidebar.addPanel){window.sidebar.addPanel(bookmarkTitle,bookmarkURL,"")}else if(window.external&&"AddFavorite"in window.external){window.external.AddFavorite(bookmarkURL,bookmarkTitle)}};Gameloft.popup=Gameloft.popup||new Object;Gameloft.popup.box=Gameloft.popup.box||new Object;Gameloft.popup.page=Gameloft.popup.page||new Object;Gameloft.popup.notification=Gameloft.popup.notification||new Object;Gameloft.popup.page.preRender=function(popupElement,topOffset,bottomOffset){};Gameloft.popup.page.languages=Gameloft.popup.page.languages||new Object;Gameloft.popup.page.languages.init=function(popupElement){this.element=popupElement;if(!this.element||!this.element.id)return false;Gameloft.popup.page.preRender(this.element);this.create();Gameloft.popup.page.languages.isOpened=false;$('a[href="#'+this.element.id+'"]').click(function(){if(Gameloft.popup.page.languages.isOpened)$.magnificPopup.close();Gameloft.popup.page.languages.isOpened=!Gameloft.popup.page.languages.isOpened})};Gameloft.popup.page.languages.create=function(){if(!this.element||!this.element.id)return false;return $('a[href="#'+this.element.id+'"]').magnificPopup({type:"inline",preloader:false,modal:true,fixedContentPos:true})};Gameloft.popup.page.theme=Gameloft.popup.page.theme||new Object;Gameloft.popup.page.theme.init=function(popupElement){this.element=popupElement;if(!this.element||!this.element.id)return false;Gameloft.popup.page.preRender(this.element);this.create()};Gameloft.popup.page.theme.create=function(){if(!this.element||!this.element.id)return false;return $('a[href="#'+this.element.id+'"]').magnificPopup({type:"inline",preloader:false,modal:true,fixedContentPos:true})};Gameloft.popup.page.categories=Gameloft.popup.page.categories||new Object;Gameloft.popup.page.categories.init=function(popupElement){this.element=popupElement;if(!this.element||!this.element.id)return false;Gameloft.popup.page.preRender(this.element);this.create()};Gameloft.popup.page.categories.create=function(){if(!this.element||!this.element.id)return false;return $('a[href="#'+this.element.id+'"]').magnificPopup({type:"inline",preloader:false,modal:true,fixedContentPos:true,callbacks:{open:function(){$("#header-search").addClass("hide");$("#header-close").removeClass("hide")}}})};Gameloft.popup.page.search=Gameloft.popup.page.search||new Object;Gameloft.popup.page.search.init=function(popupElement){this.element=popupElement;if(!this.element||!this.element.id)return false;Gameloft.popup.page.preRender(this.element);this.create();$('a[href="#'+this.element.id+'"]').click(function(){$("#header-search").addClass("hide");$("#header-close").removeClass("hide")});$("#header-search").click(function(){$("#header-search").addClass("hide");$("#header-close").removeClass("hide")});$("#header-close").click(function(){$.magnificPopup.close();$("#header-close").addClass("hide");$("#header-search").removeClass("hide")});var inputs=this.element.getElementsByTagName("input");for(var i=0;i<inputs.length;i++){if(inputs[i].getAttribute("type")==="search")inputs[i].addEventListener("input",this.searchInputListner)}$("#search-input .cancel").click(this.searchClearListner)};Gameloft.popup.page.search.create=function(){if(!this.element||!this.element.id)return false;return $('a[href="#'+this.element.id+'"]').magnificPopup({type:"inline",preloader:false,modal:true,fixedContentPos:true})};Gameloft.popup.page.search.resetError=function(){$("#search_error").empty();$("#search_error").hide()};Gameloft.popup.page.search.setError=function(val){$("#search_error").empty();$("#search_error").append(val);$("#search_error").show()};Gameloft.popup.page.search.resetProductList=function(){$("#search-gamelist").empty()};Gameloft.popup.page.search.setProductList=function(val){$("#search-gamelist").empty();$("#search-gamelist").append(val);Gameloft.gtm.events.cSearchItem()};Gameloft.popup.page.search.searchInputListner=function(){var el=document.getElementById("search-data-div");var minLength=el&&el.dataset&&el.dataset.minserchstart?el.dataset.minserchstart:2;if(this.value.length>=minLength){Gameloft.popup.page.search.sendSearchRequest($(this).val())}else{Gameloft.popup.page.search.resetError();Gameloft.popup.page.search.resetProductList()}};Gameloft.popup.page.search.sendSearchRequest=function(request){Gameloft.popup.page.search.lastSearchRequest=$.ajax({url:Gameloft.settings&&Gameloft.settings.search&&Gameloft.settings.search.products&&Gameloft.settings.search.products.request_url?Gameloft.settings.search.products.request_url:window.location.href,method:"POST",data:{search_request:request,get_items:true}});Gameloft.popup.page.search.lastSearchRequest.done(function(data,textStatus,jqXHR){if(Gameloft.popup.page.search.lastSearchRequest!==jqXHR)return;Gameloft.popup.page.search.processSearchResponse(data)})};Gameloft.popup.page.search.processSearchResponse=function(data){if(!data)return;Gameloft.popup.page.search.resetError();Gameloft.popup.page.search.resetProductList();if(!Gameloft.functions.isJson(data)){if(typeof data==="string"){var el=document.createElement("div");el.innerHTML=data;el=el.getElementsByTagName("ul");if(!el.length){console.warn("ul element has not been found");Gameloft.popup.page.search.resetProductList();if(data.length){Gameloft.popup.page.search.setError(data)}return}if(el.length>1){console.warn("need to have only one ul element");return}Gameloft.popup.page.search.setProductList(el[0].innerHTML)}else{Gameloft.popup.page.search.resetProductList()}}else{let error="Gameloft.popup.page.search.processSearchResponse() - json data is deprecated for this function. Use html instead.";console.log(error);Gameloft.popup.page.search.resetProductList();Gameloft.popup.page.search.setError(error)}};Gameloft.popup.page.search.searchClearListner=function(){$("#search-input input").val("");Gameloft.popup.page.search.resetError();Gameloft.popup.page.search.resetProductList()};Gameloft.popup.box.downloadTutorial=Gameloft.popup.box.downloadTutorial||new Object;Gameloft.popup.box.downloadTutorial.init=function(popupElement){if(Gameloft.cookie.getByType("download_tutorial"))return;this.element=popupElement;if(!this.element||!this.element.id)return false;$("#"+this.element.id+' a[href="#close"]').click(function(){$.magnificPopup.close()});$('.button-download, form[action*="download.php"] .button-download-icon').click(function(){Gameloft.popup.box.downloadTutorial.show()})};Gameloft.popup.box.downloadTutorial.show=function(){if(!this.element||!this.element.id)return false;$("#"+this.element.id+" img[data-gl-src]").each(function(i,val){$(val).attr("src",$(val).attr("data-gl-src"));$(val).removeAttr("data-gl-src")});$.magnificPopup.open({items:[{src:"#"+this.element.id,type:"inline"}],fixedContentPos:true,fixedBgPos:true,overflowY:"auto",closeBtnInside:true,preloader:false,midClick:true,removalDelay:0,mainClass:"gl-mfp-zoom-in gl-mfp-blur",callbacks:{open:function(){if(Gameloft.cookie.getByType("download_tutorial")){this.close()}else{Gameloft.cookie.setByType("download_tutorial");$("body").css("overflow","hidden")}},close:function(){$("body").css("overflow","")}}})};Gameloft.popup.notification.addToHomeScreen=Gameloft.popup.notification.addToHomeScreen||new Object;Gameloft.popup.notification.addToHomeScreen.init=function(popupElement){this.element=popupElement;return this};Gameloft.popup.notification.addToHomeScreen.show=function(){if(!this.element||!this.element.id)return false;if(!Gameloft.homeScreen||!Gameloft.homeScreen.isAvailable()||!Gameloft.cookie||Gameloft.cookie.getByType("device_homescreen"))return false;if($.magnificPopup.instance.content)return false;$.magnificPopup.open({items:{src:"#"+this.element.id,type:"inline"},alignTop:true,fixedContentPos:true,fixedBgPos:true,overflowY:"auto",closeBtnInside:true,preloader:false,midClick:true,removalDelay:0,mainClass:"gl-mfp-zoom-in gl-mfp-popup-notification",callbacks:{open:function(){$('a[href="#add-to-homescreen"]').click(function(e){e.preventDefault();Gameloft.homeScreen.addTo();$.magnificPopup.close()})},close:function(){Gameloft.cookie.setByType("device_homescreen")},afterClose:function(){if(Gameloft.popup.notification.addToBookmarks)Gameloft.popup.notification.addToBookmarks.show()}}})};Gameloft.popup.notification.addToBookmarks=Gameloft.popup.notification.addToBookmarks||new Object;Gameloft.popup.notification.addToBookmarks.init=function(popupElement){this.element=popupElement;return this};Gameloft.popup.notification.addToBookmarks.show=function(){if(!this.element||!this.element.id)return false;if(!Gameloft.bookmarks||!Gameloft.bookmarks.isAvailable()||!Gameloft.cookie||Gameloft.cookie.getByType("device_bookmarks"))return false;if($.magnificPopup.instance.content)return false;$.magnificPopup.open({items:[{src:"#"+this.element.id,type:"inline"}],alignTop:true,fixedContentPos:true,fixedBgPos:true,overflowY:"auto",closeBtnInside:true,preloader:false,midClick:true,removalDelay:0,mainClass:"gl-mfp-zoom-in gl-mfp-popup-notification",callbacks:{open:function(){$('a[href="#add-to-bookmarks"]').click(function(e){e.preventDefault();Gameloft.bookmarks.addTo();$.magnificPopup.close()})},close:function(){Gameloft.cookie.setByType("device_bookmarks")},afterClose:function(){if(Gameloft.popup.notification.addToHomeScreen)Gameloft.popup.notification.addToHomeScreen.show()}}})};Gameloft.restrictions=Gameloft.restrictions||new Object;Gameloft.restrictions.temporaryDisabling=function(a){if(a.disabled)return;a.disabled=true;setTimeout(function(){a.disabled=false},1e4)};Gameloft.restrictions.preventMultipleSubmission=function(elements){for(var i=0;i<elements.length;i++){elements[i].addEventListener("submit",function(a){var els=a.target.getElementsByTagName("button");for(var j=0;j<els.length;j++){Gameloft.restrictions.temporaryDisabling(els[j])}var els=a.target.getElementsByTagName("input");for(var j=0;j<els.length;j++){if(els[j].type!=="button"&&els[j].type!=="submit")continue;Gameloft.restrictions.temporaryDisabling(els[j])}})}};Gameloft.restrictions.init=function(){Gameloft.restrictions.preventMultipleSubmission(document.getElementsByTagName("form"))};if("serviceWorker"in navigator){window.addEventListener("load",function(){if(typeof Gameloft.settings!=="undefined"&&typeof Gameloft.settings.serviceworker_url!=="undefined"&&typeof Gameloft.settings.serviceworker_options!=="undefined"){navigator.serviceWorker.register(Gameloft.settings.serviceworker_url,Gameloft.settings.serviceworker_options)}else if(typeof Gameloft.settings!=="undefined"&&typeof Gameloft.settings.serviceworker_url!=="undefined"&&typeof Gameloft.settings.serviceworker_scope!=="undefined"){navigator.serviceWorker.register(Gameloft.settings.serviceworker_url,{scope:Gameloft.settings.serviceworker_scope})}else if(typeof Gameloft.settings!=="undefined"&&typeof Gameloft.settings.serviceworker_url!=="undefined"){navigator.serviceWorker.register(Gameloft.settings.serviceworker_url)}else{navigator.serviceWorker.register("serviceworker.php")}})}Gameloft.homeScreen=Gameloft.homeScreen||new Object;Gameloft.homeScreen.deferredBeforeInstallPrompt=Gameloft.homeScreen.deferredBeforeInstallPrompt||new Object;window.addEventListener("beforeinstallprompt",function(e){e.preventDefault();Gameloft.homeScreen=Gameloft.homeScreen||new Object;Gameloft.homeScreen.deferredBeforeInstallPrompt=e;Gameloft.popup.notification.addToHomeScreen.init(document.getElementById("add-to-homescreen-popup"));Gameloft.popup.notification.addToHomeScreen.show()});Gameloft.lazyLoading.images.set();$(document).ready(function(){Gameloft.restrictions.init();try{if($().slick)$("#top-main-slider").slick({lazyLoad:"ondemand",autoplay:true,autoplaySpeed:5e3,arrows:false,dots:true,infinite:true,speed:500,fade:true,cssEase:"linear"})}catch(error){}Gameloft.cookie.disclaimer.init(document.getElementById("cookie-disclaimer"));Gameloft.popup.page.languages.init(document.getElementById("language-switcher-popup"));Gameloft.popup.page.theme.init(document.getElementById("theme-switcher-popup"));Gameloft.popup.page.search.init(document.getElementById("search-popup"));Gameloft.popup.page.categories.init(document.getElementById("select-category-popup"));Gameloft.popup.box.downloadTutorial.init(document.getElementById("download-tutorial-popup"));Gameloft.layout.render();setTimeout(function(){Gameloft.layout.render();setTimeout(function(){Gameloft.layout.render()},500)},500);Gameloft.popup.notification.addToBookmarks.init(document.getElementById("add-to-bookmarks-popup"));Gameloft.popup.notification.addToBookmarks.show();Gameloft.lazyLoading.collections.init();Gameloft.gtm.initialPush();Gameloft.lazyLoading.images.load()});$(window).resize(function(){Gameloft.layout.render()});function getDocumentHeight(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)}function hasUserScrolledToTheBottom(){return getDocumentHeight()-($(window).scrollTop()+$(window).height())<100}function openPopupNotificationById(popupId,cookieTypeClose){if(Gameloft.cookie.getByType(cookieTypeClose))return;$.magnificPopup.close();$.magnificPopup.open({items:{src:$("#"+popupId),type:"inline",id:popupId,cookieTypeClose:cookieTypeClose},alignTop:true,fixedContentPos:true,fixedBgPos:true,overflowY:"auto",closeBtnInside:true,preloader:false,midClick:true,removalDelay:0,mainClass:"gl-mfp-zoom-in gl-mfp-popup-notification",callbacks:{open:function(){$("#"+this.currItem.data.id+" a").click(function(e){if($(this).attr("href")==="#close_popup"){e.preventDefault()}$.magnificPopup.close()})},close:function(){Gameloft.cookie.setByType(this.currItem.data.cookieTypeClose)}}})}function openPopupById(popupId,cookieTypeClose){if(Gameloft.cookie.getByType(cookieTypeClose))return;$.magnificPopup.close();$.magnificPopup.open({items:{src:$("#"+popupId),type:"inline",id:popupId,cookieTypeClose:cookieTypeClose},fixedContentPos:true,fixedBgPos:true,overflowY:"auto",closeBtnInside:true,preloader:false,midClick:true,removalDelay:0,mainClass:"gl-mfp-zoom-in",callbacks:{open:function(){$("#"+this.currItem.data.id+" a").click(function(e){if($(this).attr("href")==="#close_popup"){e.preventDefault()}if($(this).attr("rel")!=="help"){$.magnificPopup.close()}})},close:function(){Gameloft.cookie.setByType(this.currItem.data.cookieTypeClose)}}})}